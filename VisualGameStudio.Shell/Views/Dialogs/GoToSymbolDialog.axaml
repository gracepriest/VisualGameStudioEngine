<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:VisualGameStudio.Shell.ViewModels.Dialogs"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="400"
        x:Class="VisualGameStudio.Shell.Views.Dialogs.GoToSymbolDialog"
        x:DataType="vm:GoToSymbolDialogViewModel"
        Title="Go to Symbol"
        Width="500" Height="400"
        WindowStartupLocation="CenterOwner"
        CanResize="True"
        MinWidth="350"
        MinHeight="250"
        Background="#252526">

  <Window.Styles>
    <Style Selector="TextBox">
      <Setter Property="Background" Value="#3C3C3C"/>
      <Setter Property="Foreground" Value="#CCCCCC"/>
      <Setter Property="BorderBrush" Value="#3C3C3C"/>
      <Setter Property="CaretBrush" Value="#CCCCCC"/>
    </Style>
    <Style Selector="TextBox:focus">
      <Setter Property="BorderBrush" Value="#007ACC"/>
    </Style>
    <Style Selector="ListBox">
      <Setter Property="Background" Value="#1E1E1E"/>
      <Setter Property="BorderBrush" Value="#3C3C3C"/>
    </Style>
    <Style Selector="ListBoxItem">
      <Setter Property="Padding" Value="8,4"/>
    </Style>
    <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
      <Setter Property="Background" Value="#094771"/>
    </Style>
    <Style Selector="ListBoxItem:pointerover /template/ ContentPresenter">
      <Setter Property="Background" Value="#2A2D2E"/>
    </Style>
  </Window.Styles>

  <Grid RowDefinitions="Auto,*,Auto,Auto" Margin="12">
    <!-- Search Box -->
    <TextBox Grid.Row="0"
             Name="SearchTextBox"
             Text="{Binding SearchText}"
             Watermark="Type to search symbols... (supports camelCase: gds matches GetDocumentSymbols)"
             Margin="0,0,0,8"/>

    <!-- Symbol List -->
    <ListBox Grid.Row="1"
             Name="SymbolListBox"
             ItemsSource="{Binding FilteredSymbols}"
             SelectedItem="{Binding SelectedSymbol}"
             Background="#1E1E1E"
             BorderThickness="1"
             BorderBrush="#3C3C3C">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <Grid ColumnDefinitions="24,*,Auto">
            <!-- Symbol Icon -->
            <Border Grid.Column="0"
                    Width="18" Height="18"
                    Background="#3C3C3C"
                    CornerRadius="2"
                    Margin="0,0,6,0">
              <TextBlock Text="{Binding Icon}"
                         FontFamily="Consolas"
                         FontSize="11"
                         FontWeight="Bold"
                         Foreground="#DCDCAA"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
            </Border>

            <!-- Symbol Name and Detail -->
            <StackPanel Grid.Column="1" Orientation="Vertical">
              <TextBlock Text="{Binding DisplayName}"
                         Foreground="#CCCCCC"
                         FontSize="13"/>
              <StackPanel Orientation="Horizontal" IsVisible="{Binding Detail, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <TextBlock Text="{Binding Detail}"
                           Foreground="#808080"
                           FontSize="11"/>
              </StackPanel>
            </StackPanel>

            <!-- Location -->
            <TextBlock Grid.Column="2"
                       Text="{Binding LocationText}"
                       Foreground="#808080"
                       FontSize="11"
                       VerticalAlignment="Center"
                       Margin="8,0,0,0"/>
          </Grid>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <!-- Status -->
    <TextBlock Grid.Row="2"
               Text="{Binding StatusText}"
               Foreground="#808080"
               FontSize="11"
               Margin="0,8,0,4"/>

    <!-- Buttons -->
    <StackPanel Grid.Row="3"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Spacing="8">
      <Button Content="Go to"
              Command="{Binding SelectSymbolCommand}"
              MinWidth="75"
              HorizontalContentAlignment="Center"/>
      <Button Content="Cancel"
              Command="{Binding CancelCommand}"
              MinWidth="75"
              HorizontalContentAlignment="Center"/>
    </StackPanel>
  </Grid>
</Window>
